# 🤖 Autonomous Development Workflow

This document describes how to run autonomous development cycles manually since the GitHub Actions workflow requires special permissions.

## Quick Start

```bash
# Run a development cycle with default settings
python3 scripts/autonomous_dev.py

# Run with custom parameters
python3 scripts/autonomous_dev.py --max-tasks 2 --backlog-file BACKLOG.md
```

## Manual Development Loop

### 1. Preparation
```bash
# Ensure you're on the development branch
git checkout terragon/autonomous-iterative-dev

# Install dependencies (if not already done)
pip install -e .[dev]

# Run pre-commit to ensure clean starting state
pre-commit run --all-files
```

### 2. Execute Development Cycle
```bash
# Run autonomous development script
python3 scripts/autonomous_dev.py \
  --max-tasks=3 \
  --backlog-file=BACKLOG.md
```

### 3. Review and Commit
```bash
# Review changes made by the autonomous system
git status
git diff

# Run tests to ensure quality
python -m pytest -v

# Run security and style checks
ruff check .
bandit -r src -q

# Commit if everything looks good
git add .
git commit -m "🤖 Autonomous development iteration

- Implemented top-priority tasks from WSJF backlog
- Applied TDD methodology (tests first, then implementation)
- Maintained code quality and security standards

🤖 Generated with Autonomous Development Loop"

git push origin terragon/autonomous-iterative-dev
```

### 4. Create Pull Request
```bash
# Create PR for review
gh pr create \
  --title "🤖 Autonomous Development: $(date '+%Y-%m-%d %H:%M')" \
  --body "## Autonomous Development Iteration

This PR contains automated improvements based on the prioritized backlog.

### Changes Made
- Implemented top-priority tasks using WSJF methodology
- Applied TDD approach (tests first, then implementation)
- Updated documentation and maintained code quality

### Quality Assurance
- ✅ All tests passing
- ✅ Linting and security checks passed
- ✅ Pre-commit hooks validated
- ✅ Code coverage maintained/improved

### Next Steps
- Review and merge if quality standards met
- Backlog automatically re-prioritized for next iteration

---
🤖 Generated by Autonomous Development Loop" \
  --head terragon/autonomous-iterative-dev \
  --base main
```

## Advanced Configuration

### Custom Backlog Management
```bash
# Use a different backlog file
python3 scripts/autonomous_dev.py --backlog-file custom_backlog.md

# Limit to fewer tasks for smaller iterations
python3 scripts/autonomous_dev.py --max-tasks 1
```

### Development Workflow Integration

#### Daily Development Loop
```bash
#!/bin/bash
# daily_autonomous_dev.sh

echo "🚀 Starting daily autonomous development cycle..."

# Sync with main branch
git fetch origin
git merge origin/main

# Run development cycle
python3 scripts/autonomous_dev.py --max-tasks 2

# If changes were made, create PR
if ! git diff --quiet; then
    echo "📝 Changes detected, creating PR..."
    
    # Add and commit changes
    git add .
    git commit -m "🤖 Daily autonomous development $(date '+%Y-%m-%d')"
    git push origin terragon/autonomous-iterative-dev
    
    # Create PR
    gh pr create \
        --title "🤖 Daily Development: $(date '+%Y-%m-%d')" \
        --body "Automated daily development cycle with top-priority backlog items." \
        --head terragon/autonomous-iterative-dev \
        --base main
else
    echo "✅ No changes needed today"
fi
```

#### Weekly Backlog Review
```bash
#!/bin/bash
# weekly_backlog_review.sh

echo "📋 Starting weekly backlog review..."

# Re-prioritize backlog based on completed work
python3 scripts/backlog_maintenance.py --review-and-update

# Generate progress report
python3 scripts/generate_progress_report.py > WEEKLY_PROGRESS.md

echo "📊 Weekly review complete. Check WEEKLY_PROGRESS.md for details."
```

## Monitoring and Metrics

### Development Velocity Tracking
```bash
# Track completed tasks over time
git log --oneline --grep="🤖" --since="1 week ago" | wc -l

# Monitor test coverage trends  
python -m pytest --cov=src --cov-report=term-missing

# Check code quality metrics
ruff check . --statistics
```

### Backlog Health Metrics
- **Task Completion Rate**: Track WSJF score vs completion time
- **Backlog Age**: Monitor how long tasks stay in the backlog
- **Quality Metrics**: Test coverage, security scan results
- **Velocity**: Story points completed per iteration

## Troubleshooting

### Common Issues

#### Permission Errors
```bash
# If script isn't executable
chmod +x scripts/autonomous_dev.py

# If pre-commit hooks fail
pre-commit install
pre-commit run --all-files
```

#### Test Failures
```bash
# Run tests in verbose mode to debug
python -m pytest -v -s

# Run specific test files
python -m pytest tests/test_subprocess_security.py -v
```

#### Dependency Issues
```bash
# Reinstall dependencies
pip install -e .[dev] --force-reinstall

# Check for dependency conflicts
pip check
```

## Best Practices

1. **Regular Cycles**: Run development cycles 2-3 times per week
2. **Small Iterations**: Limit to 1-3 tasks per cycle to maintain quality
3. **Quality Gates**: Always run full test suite before committing
4. **Backlog Maintenance**: Review and re-prioritize weekly
5. **Human Review**: Have critical changes reviewed before merging
6. **Rollback Plan**: Keep commits small for easy rollback if needed

## Security Considerations

- All subprocess calls are validated and use `shell=False`
- Input validation prevents injection attacks
- Environment variables are controlled and limited
- Regular security scans with bandit
- Secrets are never logged or committed

## Future Enhancements

1. **GitHub Actions Integration**: Once workflow permissions are granted
2. **Intelligent Task Selection**: ML-based feasibility scoring
3. **Automated Code Review**: Integration with existing review bot
4. **Performance Monitoring**: Automatic performance regression detection
5. **Knowledge Base**: Learning from completed tasks to improve future implementations

---

For more information, see:
- `BACKLOG.md` - Current prioritized tasks
- `DEVELOPMENT_PLAN.md` - Long-term roadmap
- `scripts/autonomous_dev.py` - Development engine implementation